# 面部动画Index实验指南

> 基于2888个ADV文件的统计分析生成
> 生成时间: 2026-01-01

## 📊 统计总览

- **总index数量**: 46个
- **总使用次数**: 22,477次
- **已确认index**: 7个 ✅
  - Index 20 = 眨眼
  - Index 22 = 闭眼
  - Index 71 = 闭嘴微笑
  - Index 73 = 抿嘴
  - Index 42 = 闭嘴大笑
  - Index 3 = 皱眉担忧
  - Index 2 = 皱眉愤怒
- **高频index**: 10个 (使用>700次)

---

## 🎯 实验优先级

### ⭐ 高优先级 (TOP 10 高频使用)

这些index占据了绝大多数使用场景，建议优先测试：

| Index | 使用频率 | 平均时长 | 推测含义 | 实验建议 |
|-------|---------|---------|---------|---------|
| **20** | 8905次 | 2.0s | **眨眼 (已确认)** ✅ | `value=1.0, duration=2.0s` |
| **22** | 2317次 | 3.5s | **闭眼 (已确认)** ✅ | `value=1.0, duration=3.5s` |
| **71** | 1866次 | 4.4s | **闭嘴微笑 (已确认)** ✅ | `value=1.0, duration=4.4s` |
| **0** | 1491次 | 3.9s | 待测试 | `value=1.0/-1.0, duration=3.9s` |
| **73** | 1184次 | 3.8s | **抿嘴 (已确认)** ✅ | `value=1.0, duration=3.8s` |
| **42** | 1178次 | 3.5s | **闭嘴大笑 (已确认)** ✅ | `value=1.0, duration=3.5s` |
| **3** | 965次 | 4.0s | **皱眉担忧 (已确认)** ✅ | `value=1.0, duration=4.0s` |
| **2** | 872次 | 3.6s | **皱眉愤怒 (已确认)** ✅ | `value=1.0, duration=3.6s` |
| **46** | 854次 | 4.3s | 温柔/柔和? | `value=1.0, duration=4.3s` |
| **8** | 817次 | 4.1s | 惊讶/疑问? | `value=1.0, duration=4.1s` |

---

### 🔸 中优先级 (100-700次)

这些index代表特定情感或表情变化：

| Index | 使用频率 | 平均时长 | 特点 |
|-------|---------|---------|-----|
| 54 | 791次 | 3.7s | 常见表情 |
| 6 | 698次 | 3.9s | 常见表情 |
| 45 | 637次 | 3.6s | 常见表情 |
| 21 | 543次 | 3.0s | 较短表情 |
| 4 | 422次 | 4.1s | 中等表情 |
| 1 | 407次 | 3.8s | 中等表情 |
| 43 | 400次 | 1.6s | **短暂动作** |
| 27 | 284次 | 3.1s | 中等表情 |
| 5 | 277次 | 3.8s | 中等表情 |
| 29 | 219次 | 4.0s | 中等表情 |
| 51 | 219次 | 2.3s | 短暂表情 |
| 39 | 216次 | 2.9s | 中等表情 |
| 52 | 162次 | 1.6s | **短暂动作** |
| 72 | 151次 | 1.4s | **短暂动作** |
| 12 | 136次 | 2.9s | 中等表情 |
| 56 | 131次 | 3.9s | 中等表情 |
| 41 | 121次 | 2.0s | 短暂表情 |
| 53 | 103次 | 2.3s | 中等表情 |

---

### 🔹 低优先级 (<100次)

罕见表情，可能用于特殊场景：

| Index | 使用次数 | 备注 |
|-------|---------|-----|
| 26 | 99次 | 少见表情 |
| 48 | 94次 | 短暂动作 (1.95s) |
| 28 | 90次 | 中等表情 |
| 47 | 57次 | 短暂表情 |
| 25 | 57次 | 中等表情 |
| 13 | 27次 | 特殊表情 |
| 49 | 24次 | 短暂表情 |
| 32 | 22次 | **持续表情** (6.6s) |
| 30 | 21次 | 中等表情 |
| 其他 | <20次 | 极罕见 |

---

## 🔄 常见组合表情

某些index经常一起使用，形成复合表情：

| 组合 | 使用次数 | 推测含义 |
|------|---------|---------|
| `[0, 71]` | 219次 | 基准 + 微笑 |
| `[3, 73]` | 146次 | 笑 + 脸红 |
| `[2, 42]` | 113次 | 微笑 + 惊讶 |
| `[8, 73]` | 107次 | 疑问 + 脸红 |
| `[8, 46]` | 98次 | 疑问 + 温柔 |
| `[3, 46]` | 95次 | 笑 + 温柔 |
| `[0, 20]` | 93次 | 基准 + 眨眼 |
| `[22, 42]` | 83次 | 闭眼 + 惊讶 |
| `[20, 71]` | 83次 | 眨眼 + 微笑 |
| `[0, 20, 71]` | 64次 | 三重组合 |

---

## 🧪 实验方法

### 方法1: 修改现有ADV文件

1. 备份原始文件
2. 找到 `[actorfacialoverridemotion ...]` 行
3. 修改 `"index":数字` 为你要测试的值
4. 可选: 修改 `"duration":数字` 调整持续时间
5. 游戏内观察效果

**示例修改**:
```
原始:
[actorfacialoverridemotion id=amao setting=\{"faceModels":[\{"path":"Root_Face","index":20,"value":1.0\}]

修改为 (测试index=22):
[actorfacialoverridemotion id=amao setting=\{"faceModels":[\{"path":"Root_Face","index":22,"value":1.0\}]
```

### 方法2: 创建测试文件

复制一个简单的ADV文件，修改其中的facial motion命令：

```
[actorfacialoverridemotion id=角色id setting=\{"faceModels":[\{"path":"Root_Face","index":测试值,"value":1.0\}],"decals":[]\} clip=\{"_duration":3.0,...\}]
```

---

## 📖 faceModels 用法详解

### 单个面部表情覆盖

格式：`"faceModels":[\{"path":"Root_Face","index":数字,"value":1.0\}]`

**已确认示例**:
```json
// 闭眼
"faceModels":[\{"path":"Root_Face","index":22,"value":1.0\}]

// 眨眼
"faceModels":[\{"path":"Root_Face","index":20,"value":1.0\}]

// 闭嘴微笑
"faceModels":[\{"path":"Root_Face","index":71,"value":1.0\}]

// 皱眉愤怒
"faceModels":[\{"path":"Root_Face","index":2,"value":1.0\}]
```

### 组合面部表情覆盖

格式：`"faceModels":[\{"path":"Root_Face","index":数字1,"value":1.0\},\{"path":"Root_Face","index":数字2,"value":1.0\}]`

多个表情同时生效，产生复合情感表达。

**已确认组合示例**:
```json
// 无畏/挑衅笑容 (皱眉愤怒 + 闭嘴大笑)
"faceModels":[\{"path":"Root_Face","index":2,"value":1.0\},\{"path":"Root_Face","index":42,"value":1.0\}]
// 用途: 狠话、挑战宣言、得意坏笑

// 笑到闭眼 (闭眼 + 大笑)
"faceModels":[\{"path":"Root_Face","index":22,"value":1.0\},\{"path":"Root_Face","index":42,"value":1.0\}]
// 用途: 开心到极致、欢笑场景

// 三重组合示例 (愤怒 + 眨眼 + 大笑)
"faceModels":[\{"path":"Root_Face","index":2,"value":1.0\},\{"path":"Root_Face","index":20,"value":-1.0\},\{"path":"Root_Face","index":42,"value":1.0\}]
// 注意: index 20 使用了负值 -1.0
```

**组合规则**:
- 数组中可以包含 2-4 个不同的 index
- 常见组合模式: 眼部表情 + 嘴部表情 + 眉毛表情
- value 可以是正值(1.0)或负值(-1.0)，负值可能表示反向效果
- 多个 index 同时生效，叠加产生复杂表情

---

## 📋 实验记录表

建议按此格式记录实验结果：

| Index | 测试值(value) | 持续时间 | 观察到的效果 | 备注 |
|-------|-------------|---------|------------|-----|
| 20 | 1.0 | 2.0s | 眨眼 | ✓ 已确认 |
| 22 | 1.0 | 3.5s | 闭上眼睛 | ✓ 已确认 |
| 71 | 1.0 | 4.4s | 闭嘴微笑 | ✓ 已确认 |
| 73 | 1.0 | 3.8s | 抿嘴 | ✓ 已确认 |
| 42 | 1.0 | 3.5s | 闭嘴大笑 | ✓ 已确认 |
| 3 | 1.0 | 4.0s | 皱眉担忧 | ✓ 已确认 |
| 2 | 1.0 | 3.6s | 皱眉愤怒 | ✓ 已确认 |
| 0 | 1.0 | 3.9s | [待测试] | |
| 0 | -1.0 | 3.9s | [待测试] | 注意负值 |
| ... | ... | ... | ... | |

---

## 💡 观察要点

### 眼部相关
- **20**: 极高频使用，平均2秒，很可能是眨眼
- **22**: 已确认闭眼，平均3.5秒
- 注意与decals的配合（腮红等）

### 嘴部相关
- **42**: 高频使用，可能是张嘴/惊讶
- **43**: 短暂动作(1.6s)，可能是嘴部小动作

### 脸红相关
- **73**: 常与笑容组合，推测为脸红
- 常配合 `LeftCheek/RightCheek` decals

### 表情组合
- 很多表情是多个index叠加
- 注意 `value` 的正负值
- `value=-1.0` 可能表示反向/取消效果

---

## 🎮 推荐实验流程

### 阶段1: 验证高频index ✅ 完成度 70%
- ✅ Index 20 = 眨眼
- ✅ Index 22 = 闭眼  
- ✅ Index 71 = 闭嘴微笑
- ✅ Index 73 = 抿嘴
- ✅ Index 42 = 闭嘴大笑
- ✅ Index 3 = 皱眉担忧
- ✅ Index 2 = 皱眉愤怒
- ⏳ Index 0 = 待测试 (注意测试正负值)
- ⏳ Index 46 = 待测试
- ⏳ Index 8 = 待测试

### 阶段2: 探索表情index (2-3小时)
测试 index 42, 3, 2, 46, 8 等常见表情

### 阶段3: 研究组合 (1-2小时)
尝试常见组合如 `[0, 71]`, `[3, 73]` 等

**已验证组合效果**:
- ✅ `[2, 42]` = 皱眉愤怒 + 闭嘴大笑 = **无畏/挑衅笑容** (得意坏笑,适用于狠话、挑战宣言)
- ✅ `[22, 42]` = 闭眼 + 大笑 = **笑到闭眼** (开心到极致)
- `[3, 73]` = 担忧 + 抿嘴 = **担忧克制** (待验证)
- `[3, 42]` = 担忧 + 大笑 = **苦笑** (待验证)

### 阶段4: 特殊情况 (可选)
- 测试负值 `value=-1.0`
- 测试极短/极长duration
- 测试罕见index

---

## 📁 参考文件

可在以下文件中找到大量示例：

### Index 20 (眨眼) 示例
- `adv_cidol-amao-3-000_01.txt:93`
- `adv_cidol-amao-3-000_01.txt:103`

### Index 22 (闭眼) 示例  
- `adv_cidol-amao-3-000_01.txt:18`
- `adv_cidol-amao-3-000_01.txt:116`

### Index 71 (微笑?) 示例
- `adv_cidol-amao-3-001_01.txt:34`
- `adv_cidol-amao-3-001_01.txt:150`

详细的每个index使用位置见 `facial_index_analysis.txt`

---

## 🔧 工具

- `analyze_facial_indices.py` - 统计分析脚本
- `facial_index_analysis.txt` - 详细分析报告

---

## ⚠️ 注意事项

1. **备份原文件** - 修改前务必备份
2. **value值范围** - 通常为 -1.0 到 1.0
3. **duration合理性** - 太短(<0.2s)或太长(>30s)可能不自然
4. **角色差异** - 不同角色的同一index可能略有差异
5. **组合效果** - 多个index叠加时注意观察

---

## 📊 统计数据来源

本指南基于以下数据生成：
- 分析文件数: 2888个ADV文件
- 统计到的不同index: 46个
- 总使用次数: 22,477次
- 数据来源: `D:\GIT\gakumas-adv-tools\resource\`

---

祝实验顺利！如有新发现欢迎更新此文档 🎉
