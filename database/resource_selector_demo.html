<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èµ„æºé€‰æ‹©å™¨æ¼”ç¤º - Gakumas ADV Editor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            color: #4ec9b0;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #858585;
            margin-bottom: 30px;
        }

        .demo-section {
            background: #252526;
            border: 1px solid #3e3e42;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .demo-section h2 {
            color: #569cd6;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #9cdcfe;
            font-size: 14px;
        }

        select, input[type="text"] {
            width: 100%;
            padding: 8px 12px;
            background: #3c3c3c;
            border: 1px solid #555;
            border-radius: 4px;
            color: #d4d4d4;
            font-size: 14px;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #007acc;
        }

        button {
            padding: 8px 16px;
            background: #0e639c;
            border: none;
            border-radius: 4px;
            color: white;
            font-size: 14px;
            cursor: pointer;
            margin-right: 10px;
        }

        button:hover {
            background: #1177bb;
        }

        button:active {
            background: #0d5a8f;
        }

        .result-box {
            background: #1e1e1e;
            border: 1px solid #3e3e42;
            border-radius: 4px;
            padding: 15px;
            margin-top: 15px;
            min-height: 100px;
            max-height: 300px;
            overflow-y: auto;
        }

        .result-box pre {
            color: #ce9178;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
        }

        .resource-list {
            list-style: none;
        }

        .resource-item {
            padding: 8px 12px;
            margin: 5px 0;
            background: #2d2d30;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .resource-item:hover {
            background: #3e3e42;
        }

        .resource-item.selected {
            background: #094771;
            border-left: 3px solid #007acc;
        }

        .resource-type {
            color: #4ec9b0;
            font-size: 12px;
        }

        .character-badge {
            display: inline-block;
            padding: 2px 8px;
            background: #6a329f;
            border-radius: 3px;
            font-size: 11px;
            margin-left: 8px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .stat-card {
            background: #2d2d30;
            padding: 12px;
            border-radius: 4px;
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            color: #4ec9b0;
            font-weight: bold;
        }

        .stat-label {
            font-size: 12px;
            color: #858585;
            margin-top: 5px;
        }

        .loading {
            color: #858585;
            font-style: italic;
        }

        .error {
            color: #f48771;
        }

        .success {
            color: #89d185;
        }

        .inline-group {
            display: flex;
            gap: 10px;
        }

        .inline-group .form-group {
            flex: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¬ Gakumas ADV èµ„æºé€‰æ‹©å™¨æ¼”ç¤º</h1>
        <p class="subtitle">æ¼”ç¤ºå¦‚ä½•åœ¨Webç¼–è¾‘å™¨ä¸­ä½¿ç”¨èµ„æºæ•°æ®åº“API</p>

        <!-- è§’è‰²æ¨¡å‹é€‰æ‹© -->
        <div class="demo-section">
            <h2>1. è§’è‰²æ¨¡å‹é€‰æ‹©å™¨ (Actor Models)</h2>
            <div class="inline-group">
                <div class="form-group">
                    <label>é€‰æ‹©è§’è‰²:</label>
                    <select id="characterSelect">
                        <option value="">åŠ è½½ä¸­...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>æ¨¡å‹ç±»å‹:</label>
                    <select id="modelTypeSelect">
                        <option value="">å…¨éƒ¨</option>
                        <option value="body">Body (èº«ä½“)</option>
                        <option value="face">Face (é¢éƒ¨)</option>
                        <option value="hair">Hair (å‘å‹)</option>
                    </select>
                </div>
            </div>
            <button onclick="loadModels()">åŠ è½½æ¨¡å‹åˆ—è¡¨</button>
            <div class="result-box" id="modelsResult">
                <p class="loading">è¯·å…ˆé€‰æ‹©è§’è‰²å’Œç±»å‹...</p>
            </div>
        </div>

        <!-- åŠ¨ä½œé€‰æ‹© -->
        <div class="demo-section">
            <h2>2. åŠ¨ä½œé€‰æ‹©å™¨ (Actor Motion / Facial Motion)</h2>
            <div class="inline-group">
                <div class="form-group">
                    <label>åŠ¨ä½œåˆ†ç±»:</label>
                    <select id="motionCategorySelect" onchange="loadMotionCharacters()">
                        <option value="">è¯·é€‰æ‹©åŠ¨ä½œåˆ†ç±»...</option>
                        <option value="actor">è§’è‰²åŠ¨ä½œ (Actor Motion)</option>
                        <option value="facial">é¢éƒ¨è¡¨æƒ… (Facial Motion)</option>
                    </select>
                </div>
                <div class="form-group" id="motionCharacterGroup" style="display: none;">
                    <label>é€‰æ‹©è§’è‰²:</label>
                    <select id="motionCharacterSelect">
                        <option value="">åŠ è½½ä¸­...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>è¡Œä¸ºç±»å‹:</label>
                    <select id="actionTypeSelect">
                        <option value="">å…¨éƒ¨</option>
                        <option value="idle">Idle (å¾…æœº)</option>
                        <option value="walk">Walk (è¡Œèµ°)</option>
                        <option value="dance">Dance (è·³èˆ)</option>
                        <option value="emotion">Emotion (æƒ…ç»ª)</option>
                    </select>
                </div>
            </div>
            <button onclick="loadMotions()">åŠ è½½åŠ¨ä½œåˆ—è¡¨</button>
            <div class="result-box" id="motionsResult">
                <p class="loading">è¯·å…ˆé€‰æ‹©åŠ¨ä½œç±»å‹...</p>
            </div>
        </div>

        <!-- ç¯å¢ƒåœºæ™¯é€‰æ‹© -->
        <div class="demo-section">
            <h2>3. ç¯å¢ƒåœºæ™¯é€‰æ‹©å™¨ (Backgrounds)</h2>
            <div class="inline-group">
                <div class="form-group">
                    <label>åœºæ™¯ç±»å‹:</label>
                    <select id="envTypeSelect">
                        <option value="">å…¨éƒ¨</option>
                        <option value="2d">2Dåœºæ™¯</option>
                        <option value="3d">3Dåœºæ™¯</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>æ—¶é—´:</label>
                    <select id="timeOfDaySelect">
                        <option value="">å…¨éƒ¨</option>
                        <option value="noon">Noon (ä¸­åˆ)</option>
                        <option value="night">Night (å¤œæ™š)</option>
                        <option value="evening">Evening (å‚æ™š)</option>
                        <option value="morning">Morning (æ—©æ™¨)</option>
                    </select>
                </div>
            </div>
            <button onclick="loadEnvironments()">åŠ è½½åœºæ™¯åˆ—è¡¨</button>
            <div class="result-box" id="environmentsResult">
                <p class="loading">è¯·å…ˆé€‰æ‹©åœºæ™¯ç±»å‹...</p>
            </div>
        </div>

        <!-- æœç´¢åŠŸèƒ½ -->
        <div class="demo-section">
            <h2>4. èµ„æºæœç´¢</h2>
            <div class="form-group">
                <label>æœç´¢å…³é”®è¯:</label>
                <input type="text" id="searchInput" placeholder="è¾“å…¥å…³é”®è¯ï¼Œå¦‚ 'amao', 'glad', 'night'...">
            </div>
            <button onclick="searchResources()">æœç´¢</button>
            <div class="result-box" id="searchResult">
                <p class="loading">è¾“å…¥å…³é”®è¯åç‚¹å‡»æœç´¢...</p>
            </div>
        </div>

        <!-- ç»Ÿè®¡ä¿¡æ¯ -->
        <div class="demo-section">
            <h2>5. æ•°æ®åº“ç»Ÿè®¡</h2>
            <button onclick="loadStats()">åŠ è½½ç»Ÿè®¡ä¿¡æ¯</button>
            <div class="stats-grid" id="statsGrid">
                <div class="stat-card loading">åŠ è½½ä¸­...</div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:5000/api';

        // è§’è‰²IDåˆ°ä¸­æ–‡åçš„æ˜ å°„
        const CHARACTER_NAMES = {
            'amao': 'æœ‰æ‘éº»å¤®',
            'atbm': 'é›¨å¤œç‡•',
            'fktn': 'è—¤ç”°ç´éŸ³',
            'hmsz': 'ç§¦è°·ç¾é“ƒ',
            'hrnm': 'å§¬å´è‰æ³¢',
            'hski': 'èŠ±æµ·å’²å­£',
            'hume': 'èŠ±æµ·ä½‘èŠ½',
            'jsna': 'åç‹æ˜Ÿå—',
            'kcna': 'ä»“æœ¬åƒå¥ˆ',
            'kllj': 'è‘›åŸè‰è‰å¨…',
            'nasr': 'æ ¹ç»ªäºšçº±é‡Œ',
            'shro': 'ç­±æ³½å¹¿',
            'ssmk': 'ç´«äº‘æ¸…å¤',
            'trda': 'èˆè¹ˆè®­ç»ƒå‘˜',
            'trvi': 'è§†è§‰è®­ç»ƒå‘˜',
            'trvo': 'æ­Œå”±è®­ç»ƒå‘˜',
            'ttmr': 'æœˆæ‘æ‰‹æ¯¬',
            'cmmn': 'è§’è‰²é€šç”¨'
        };

        // è·å–è§’è‰²æ˜¾ç¤ºåç§°
        function getCharacterDisplayName(charId) {
            const cnName = CHARACTER_NAMES[charId];
            return cnName ? `${charId.toUpperCase()} (${cnName})` : charId.toUpperCase();
        }

        // åˆå§‹åŒ–ï¼šåŠ è½½è§’è‰²åˆ—è¡¨
        async function init() {
            try {
                const response = await fetch(`${API_BASE}/characters`);
                const data = await response.json();
                
                if (data.success) {
                    const select = document.getElementById('characterSelect');
                    select.innerHTML = '<option value="">å…¨éƒ¨è§’è‰²</option>';
                    data.data.forEach(charId => {
                        const option = document.createElement('option');
                        option.value = charId;
                        option.textContent = getCharacterDisplayName(charId);
                        select.appendChild(option);
                    });
                }
            } catch (error) {
                console.error('åŠ è½½è§’è‰²åˆ—è¡¨å¤±è´¥:', error);
                document.getElementById('characterSelect').innerHTML = 
                    '<option value="">åŠ è½½å¤±è´¥ - è¯·å¯åŠ¨APIæœåŠ¡å™¨</option>';
            }
        }

        // åŠ è½½æ¨¡å‹åˆ—è¡¨
        async function loadModels() {
            const characterId = document.getElementById('characterSelect').value;
            const modelType = document.getElementById('modelTypeSelect').value;
            const resultBox = document.getElementById('modelsResult');

            resultBox.innerHTML = '<p class="loading">åŠ è½½ä¸­...</p>';

            try {
                let url = `${API_BASE}/resources/models?`;
                if (characterId) url += `character_id=${characterId}&`;
                if (modelType) url += `model_type=${modelType}`;

                const response = await fetch(url);
                const data = await response.json();

                if (data.success && data.data.length > 0) {
                    const list = document.createElement('ul');
                    list.className = 'resource-list';

                    data.data.forEach(model => {
                        const li = document.createElement('li');
                        li.className = 'resource-item';
                        li.onclick = () => selectResource(li, model.model_name);
                        const charDisplay = model.character_id ? getCharacterDisplayName(model.character_id) : 'common';
                        li.innerHTML = `
                            <div>${model.model_name}</div>
                            <div class="resource-type">
                                ${model.model_type}
                                <span class="character-badge">${charDisplay}</span>
                            </div>
                        `;
                        list.appendChild(li);
                    });

                    resultBox.innerHTML = `<p class="success">æ‰¾åˆ° ${data.count} ä¸ªæ¨¡å‹</p>`;
                    resultBox.appendChild(list);
                } else {
                    resultBox.innerHTML = '<p class="error">æœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æ¨¡å‹</p>';
                }
            } catch (error) {
                resultBox.innerHTML = `<p class="error">åŠ è½½å¤±è´¥: ${error.message}</p>`;
            }
        }

        // åŠ è½½åŠ¨ä½œè§’è‰²åˆ—è¡¨ï¼ˆæ ¹æ®åˆ†ç±»åŠ¨æ€åŠ è½½ï¼‰
        async function loadMotionCharacters() {
            const category = document.getElementById('motionCategorySelect').value;
            const characterGroup = document.getElementById('motionCharacterGroup');
            const characterSelect = document.getElementById('motionCharacterSelect');
            const resultBox = document.getElementById('motionsResult');
            
            // æ¸…ç©ºç»“æœ
            resultBox.innerHTML = '<p class="loading">è¯·å…ˆé€‰æ‹©è§’è‰²...</p>';
            
            if (!category) {
                characterGroup.style.display = 'none';
                return;
            }
            
            // æ˜¾ç¤ºè§’è‰²é€‰æ‹©æ¡†
            characterGroup.style.display = 'block';
            characterSelect.innerHTML = '<option value="">åŠ è½½ä¸­...</option>';
            
            try {
                // æ ¹æ®åˆ†ç±»è®¾ç½®motion_type
                let motionType = '';
                if (category === 'actor') {
                    // è§’è‰²åŠ¨ä½œï¼šåŒ…æ‹¬commonå’Œcharacter
                    motionType = '';  // ä¸é™åˆ¶ç±»å‹ï¼Œåé¢ä¼šç­›é€‰
                } else if (category === 'facial') {
                    motionType = 'facial';
                }
                
                // è°ƒç”¨APIè·å–è¯¥ç±»å‹çš„æ‰€æœ‰åŠ¨ä½œ
                let url = `${API_BASE}/resources/motions?`;
                if (motionType) url += `motion_type=${motionType}`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.success) {
                    // æå–å”¯ä¸€çš„è§’è‰²ID
                    const characterIds = new Set();
                    data.data.forEach(motion => {
                        if (category === 'actor') {
                            // è§’è‰²åŠ¨ä½œï¼šåªè¦characterç±»å‹ï¼ˆåŒ…æ‹¬cmmnï¼‰
                            if (motion.motion_type === 'character') {
                                if (motion.character_id) {
                                    characterIds.add(motion.character_id);
                                }
                            }
                        } else if (category === 'facial') {
                            // é¢éƒ¨è¡¨æƒ…
                            if (motion.character_id) {
                                characterIds.add(motion.character_id);
                            }
                        }
                    });
                    
                    // å¡«å……ä¸‹æ‹‰é€‰å•
                    characterSelect.innerHTML = '<option value="">å…¨éƒ¨è§’è‰²</option>';
                    
                    // æ’åºå¹¶æ·»åŠ é€‰é¡¹
                    const sortedIds = Array.from(characterIds).sort();
                    sortedIds.forEach(charId => {
                        const option = document.createElement('option');
                        option.value = charId;
                        if (charId === 'cmmn') {
                            option.textContent = 'CMMN (é€šç”¨)';
                        } else {
                            option.textContent = getCharacterDisplayName(charId);
                        }
                        characterSelect.appendChild(option);
                    });
                }
            } catch (error) {
                characterSelect.innerHTML = '<option value="">åŠ è½½å¤±è´¥</option>';
                console.error('åŠ è½½è§’è‰²åˆ—è¡¨å¤±è´¥:', error);
            }
        }

        // åŠ è½½åŠ¨ä½œåˆ—è¡¨
        async function loadMotions() {
            const category = document.getElementById('motionCategorySelect').value;
            const motionCharacterId = document.getElementById('motionCharacterSelect').value;
            const actionType = document.getElementById('actionTypeSelect').value;
            const resultBox = document.getElementById('motionsResult');

            if (!category) {
                resultBox.innerHTML = '<p class="error">è¯·å…ˆé€‰æ‹©åŠ¨ä½œåˆ†ç±»</p>';
                return;
            }

            resultBox.innerHTML = '<p class="loading">åŠ è½½ä¸­...</p>';

            try {
                let url = `${API_BASE}/resources/motions?`;
                
                // æ ¹æ®åˆ†ç±»è®¾ç½®motion_type
                if (category === 'facial') {
                    url += `motion_type=facial&`;
                } else if (category === 'actor') {
                    // è§’è‰²åŠ¨ä½œä¸é™åˆ¶motion_typeï¼Œè®©åç«¯è¿”å›characterå’Œcommon
                }
                
                // è®¾ç½®è§’è‰²ID
                if (motionCharacterId) {
                    // cmmn ç°åœ¨ä¹Ÿæ˜¯ä¸€ä¸ª character_id
                    url += `character_id=${motionCharacterId}&`;
                }
                
                if (actionType) url += `action_type=${actionType}`;

                const response = await fetch(url);
                const data = await response.json();

                if (data.success && data.data.length > 0) {
                    const list = document.createElement('ul');
                    list.className = 'resource-list';

                    data.data.forEach(motion => {
                        const li = document.createElement('li');
                        li.className = 'resource-item';
                        li.onclick = () => selectResource(li, motion.motion_name);
                        const charDisplay = motion.character_id ? getCharacterDisplayName(motion.character_id) : '';
                        li.innerHTML = `
                            <div>${motion.motion_name}</div>
                            <div class="resource-type">
                                ${motion.motion_type} ${motion.action_type ? `- ${motion.action_type}` : ''}
                                ${motion.character_id ? `<span class="character-badge">${charDisplay}</span>` : ''}
                            </div>
                        `;
                        list.appendChild(li);
                    });

                    resultBox.innerHTML = `<p class="success">æ‰¾åˆ° ${data.count} ä¸ªåŠ¨ä½œ</p>`;
                    resultBox.appendChild(list);
                } else {
                    resultBox.innerHTML = '<p class="error">æœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„åŠ¨ä½œ</p>';
                }
            } catch (error) {
                resultBox.innerHTML = `<p class="error">åŠ è½½å¤±è´¥: ${error.message}</p>`;
            }
        }

        // åŠ è½½ç¯å¢ƒåˆ—è¡¨
        async function loadEnvironments() {
            const envType = document.getElementById('envTypeSelect').value;
            const timeOfDay = document.getElementById('timeOfDaySelect').value;
            const resultBox = document.getElementById('environmentsResult');

            resultBox.innerHTML = '<p class="loading">åŠ è½½ä¸­...</p>';

            try {
                let url = `${API_BASE}/resources/environments?`;
                if (envType) url += `env_type=${envType}&`;
                if (timeOfDay) url += `time_of_day=${timeOfDay}`;

                const response = await fetch(url);
                const data = await response.json();

                if (data.success && data.data.length > 0) {
                    const list = document.createElement('ul');
                    list.className = 'resource-list';

                    data.data.forEach(env => {
                        const li = document.createElement('li');
                        li.className = 'resource-item';
                        li.onclick = () => selectResource(li, env.env_name);
                        li.innerHTML = `
                            <div>${env.env_name}</div>
                            <div class="resource-type">
                                ${env.env_type} - ${env.location} - ${env.time_of_day}
                            </div>
                        `;
                        list.appendChild(li);
                    });

                    resultBox.innerHTML = `<p class="success">æ‰¾åˆ° ${data.count} ä¸ªåœºæ™¯</p>`;
                    resultBox.appendChild(list);
                } else {
                    resultBox.innerHTML = '<p class="error">æœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„åœºæ™¯</p>';
                }
            } catch (error) {
                resultBox.innerHTML = `<p class="error">åŠ è½½å¤±è´¥: ${error.message}</p>`;
            }
        }

        // æœç´¢èµ„æº
        async function searchResources() {
            const keyword = document.getElementById('searchInput').value.trim();
            const resultBox = document.getElementById('searchResult');

            if (!keyword) {
                resultBox.innerHTML = '<p class="error">è¯·è¾“å…¥æœç´¢å…³é”®è¯</p>';
                return;
            }

            resultBox.innerHTML = '<p class="loading">æœç´¢ä¸­...</p>';

            try {
                const response = await fetch(`${API_BASE}/search?q=${encodeURIComponent(keyword)}`);
                const data = await response.json();

                if (data.success) {
                    let html = '';
                    let totalCount = 0;

                    for (const [category, items] of Object.entries(data.data)) {
                        if (items && items.length > 0) {
                            html += `<h3 style="color: #569cd6; margin-top: 15px;">${category} (${items.length})</h3>`;
                            html += '<ul class="resource-list">';
                            items.forEach(item => {
                                const name = item.model_name || item.motion_name || item.env_name || item.audio_name;
                                html += `<li class="resource-item" onclick="selectResource(this, '${name}')">${name}</li>`;
                            });
                            html += '</ul>';
                            totalCount += items.length;
                        }
                    }

                    if (totalCount > 0) {
                        resultBox.innerHTML = `<p class="success">æ‰¾åˆ° ${totalCount} ä¸ªç»“æœ</p>` + html;
                    } else {
                        resultBox.innerHTML = '<p class="error">æœªæ‰¾åˆ°ä»»ä½•ç»“æœ</p>';
                    }
                }
            } catch (error) {
                resultBox.innerHTML = `<p class="error">æœç´¢å¤±è´¥: ${error.message}</p>`;
            }
        }

        // åŠ è½½ç»Ÿè®¡ä¿¡æ¯
        async function loadStats() {
            const statsGrid = document.getElementById('statsGrid');
            statsGrid.innerHTML = '<div class="stat-card loading">åŠ è½½ä¸­...</div>';

            try {
                const response = await fetch(`${API_BASE}/stats`);
                const data = await response.json();

                if (data.success) {
                    const stats = data.data;
                    let html = '';

                    // è§’è‰²æ•°é‡
                    html += `
                        <div class="stat-card">
                            <div class="stat-value">${stats.characters}</div>
                            <div class="stat-label">è§’è‰²</div>
                        </div>
                    `;

                    // ç¯å¢ƒæ•°é‡
                    const envTotal = Object.values(stats.environments || {}).reduce((a, b) => a + b, 0);
                    html += `
                        <div class="stat-card">
                            <div class="stat-value">${envTotal}</div>
                            <div class="stat-label">ç¯å¢ƒåœºæ™¯</div>
                        </div>
                    `;

                    // åŠ¨ä½œæ•°é‡
                    const motionTotal = Object.values(stats.motions || {}).reduce((a, b) => a + b, 0);
                    html += `
                        <div class="stat-card">
                            <div class="stat-value">${motionTotal}</div>
                            <div class="stat-label">åŠ¨ä½œ</div>
                        </div>
                    `;

                    // æ¨¡å‹æ•°é‡
                    const modelTotal = Object.values(stats.models || {}).reduce((a, b) => a + b, 0);
                    html += `
                        <div class="stat-card">
                            <div class="stat-value">${modelTotal}</div>
                            <div class="stat-label">æ¨¡å‹</div>
                        </div>
                    `;

                    statsGrid.innerHTML = html;
                }
            } catch (error) {
                statsGrid.innerHTML = `<div class="stat-card error">åŠ è½½å¤±è´¥</div>`;
            }
        }

        // é€‰æ‹©èµ„æº
        function selectResource(element, resourceName) {
            // ç§»é™¤å…¶ä»–é€‰ä¸­çŠ¶æ€
            element.parentElement.querySelectorAll('.resource-item').forEach(item => {
                item.classList.remove('selected');
            });

            // æ ‡è®°å½“å‰é€‰ä¸­
            element.classList.add('selected');

            // åœ¨å®é™…ç¼–è¾‘å™¨ä¸­ï¼Œè¿™é‡Œä¼šå°†èµ„æºåç§°å¡«å…¥å¯¹åº”çš„è¾“å…¥æ¡†
            console.log('é€‰æ‹©çš„èµ„æº:', resourceName);
            alert(`å·²é€‰æ‹©: ${resourceName}\n\nåœ¨å®é™…ç¼–è¾‘å™¨ä¸­ï¼Œè¿™å°†è‡ªåŠ¨å¡«å…¥å¯¹åº”çš„å­—æ®µã€‚`);
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.onload = init;
    </script>
</body>
</html>
